
<script type="text/html" data-template-name="unknown">
    <div class="form-tips">
        <span data-i18n="[html]unknown.tip"></span>
        <p id="unknown-module-known">
            <button id="unknown-manage-dependencies" class="red-ui-button"><span data-i18n="unknown.manageModules"></span></button>
        </p>
    </div>
    </div>
    
</script>

<script type="text/javascript">
    RED.nodes.registerType('unknown', {
        category: 'unknown',
        color:"#fff000",
        defaults: {
            name: {value:""},
            modules: { value: [] }
        },
        inputs:1,
        outputs:1,
        icon: "",
        label: function() {
            return "("+this.name+")"||this._("unknown.label.unknown");
        },
        labelStyle: function() {
            return "node_label_unknown";
        },
        oneditprepare: function () {
            const node = this
            if (this.modules && this.modules.length > 0) {
                $('#unknown-manage-dependencies').on('click', function () {
                    RED.actions.invoke('core:cancel-edit-tray')
                    RED.actions.invoke('core:manage-palette', {
                        view: 'install',
                        filter: '"' + node.modules.join('", "') + '"'
                    })
                })
            } else {
                $('#unknown-module-known').hide()
            }
        }
    });
</script>
